import streamlit as st
from urllib.parse import quote

st.set_page_config(page_title="Gerador de Links", layout="centered")

st.title("üîó Gerador de Links de Upload")
st.write("Selecione os documentos pendentes para o cliente. O link gerado mostrar√° apenas os campos selecionados.")

# --- CONFIGURE AQUI ---
# Coloque a URL principal da sua aplica√ß√£o publicada no Streamlit Cloud
URL_BASE_DA_APP = "https://app-documentos-7l5ecrvyv7lhjl3ska9e3t.streamlit.app/" 

# Lista MESTRA com TODOS os documentos que voc√™ pode vir a pedir
LISTA_MESTRA_DOCUMENTOS = [
    'Contrato Social',
    'Cart√£o CNPJ',
    'Procura√ß√£o',
    'Memorial Descritivo',
    'ART do Respons√°vel T√©cnico',
    'Licen√ßa de Opera√ß√£o Anterior',
    'Comprovante de Endere√ßo',
    'Outorga de Uso de √Ågua'
    # Adicione outros documentos que voc√™ possa precisar no futuro
]
# --------------------

if URL_BASE_DA_APP == "https://seu-app-aqui.streamlit.app":
    st.error("‚ö†Ô∏è IMPORTANTE: Edite este arquivo (`gerador_de_links.py`) e substitua o valor da vari√°vel `URL_BASE_DA_APP` pela URL real da sua aplica√ß√£o.")
else:
    documentos_selecionados = st.multiselect(
        "Selecione os documentos pendentes:",
        options=LISTA_MESTRA_DOCUMENTOS
    )

    if st.button("Gerar Link Personalizado"):
        if not documentos_selecionados:
            st.warning("Por favor, selecione pelo menos um documento.")
        else:
            # Transforma a lista em uma string separada por v√≠rgulas, com espa√ßos substitu√≠dos por '_'
            docs_param = ",".join([doc.replace(" ", "_") for doc in documentos_selecionados])
            
            link_final = f"{URL_BASE_DA_APP}?docs={docs_param}"
            
            st.success("Link gerado com sucesso! Copie e envie para o seu cliente:")
            st.code(link_final)